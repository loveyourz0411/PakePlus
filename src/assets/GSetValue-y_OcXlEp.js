import{_ as Z}from"./empty-SobI8E2D.js";import{c as D}from"./categorizeParameters-C40L_2hr.js";import{s as w}from"./system-BzlGO5Bl.js";import{u as I}from"./util-CASLgOZv.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as A,k as E,a_ as le,q as ae,a as s,z as u,g as n,bw as ne,n as d,i as O,y as U,c as y,p as _,m as i,f as v,F as m,A as T,aW as F,x as ue}from"./index-Dju9e0Mk.js";const oe={key:6,style:{width:"100%",display:"flex"}},de={key:7,class:"units"},te={__name:"GSetValue",props:{gridItem:Object},setup(j){const c=A({sendType:0,cycleValue:300}),P=[{label:"随机数",value:0},{label:"正弦波",value:1},{label:"方波",value:2}],B=[{label:"整数",value:0},{label:"小数",value:1}],N=j,t=A(!1),h=E(()=>N.gridItem.data),k=E(()=>N.gridItem.data.dataForm.parameter),M=le("environment");let V=null,S=!1;ae(()=>S=!0);function f(a){if(M==="PREVIEW")switch(a._FuncType){case 0:if(a._DataType===void 0||!a._Min||!a._Max)return;Object.assign(a,{FuncType:a._FuncType,Value:{DataType:a._DataType,Min:Number(a._Min),Max:Number(a._Max)}}),p(a);break;case 1:if(!a._Time||!a._Amp)return;Object.assign(a,{FuncType:a._FuncType,Value:{DataType:a._DataType,Time:Number(a._Time),Amp:Number(a._Amp)}}),p(a);break;case 2:if(!a._Min||!a._Max||!a._Time||!a._Scale)return;Object.assign(a,{FuncType:a._FuncType,Value:{DataType:a._DataType,Min:Number(a._Min),Max:Number(a._Max),Time:Number(a._Time),Scale:Number(a._Scale)}}),p(a);break}}function p(a){if(!S||M!=="PREVIEW")return;if(a&&a.Value!==void 0&&a.Value!=="")return a._Value=I.parseValue(a.Value),w({time:1e3,once:!0,messageList:D([a])});c.value.sendType===1&&(t.value=!0),V==null||V.abort();const o={time:Number(c.value.cycleValue),once:c.value.sendType===0,messageList:D(k.value.filter(r=>r.Value===void 0||r.Value===""?!1:(r._Value=I.parseValue(r.Value),!0)))};V=w(o)}function z(){V==null||V.abort(),t.value=!1}return(a,o)=>{const r=s("el-input"),g=s("el-option"),C=s("el-select"),L=s("el-radio"),R=s("el-radio-group"),W=s("el-slider"),G=s("el-switch"),q=s("el-input-number"),H=s("el-form-item"),J=s("el-form"),K=s("a-empty"),$=s("el-button"),Q=s("NSpace"),X=s("el-card");return n(),u(X,{style:ue({background:h.value.attrForm.bgColor||"#fff",borderRadius:"10px"}),shadow:"hover"},ne({default:d(()=>{var b;return[y(J,{"label-width":"auto","label-position":"right"},{default:d(()=>[(n(!0),v(m,null,T(k.value,(e,Y)=>(n(),u(H,{key:Y,label:`${e.DisplayName||e.ParamName}：`},{default:d(()=>[!e.type||e.type==="input"?(n(),u(r,{key:0,modelValue:e.Value,"onUpdate:modelValue":l=>e.Value=l,disabled:t.value,style:{flex:"1"},placeholder:"按Enter或者失焦发送",onChange:l=>p(e)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="select"?(n(),u(C,{key:1,modelValue:e.Value,"onUpdate:modelValue":l=>e.Value=l,disabled:t.value,style:{flex:"1"},placeholder:"请选择",clearable:"",onChange:l=>p(e)},{default:d(()=>[(n(!0),v(m,null,T(e.selectConfig||[],(l,x)=>(n(),u(g,{key:x,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="radio"?(n(),u(R,{key:2,modelValue:e.Value,"onUpdate:modelValue":l=>e.Value=l,disabled:t.value,style:{flex:"1"},onChange:l=>p(e)},{default:d(()=>[(n(!0),v(m,null,T(e.radioConfig||[],(l,x)=>(n(),u(L,{key:x,value:l.value},{default:d(()=>[i(U(l.label),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="slider"?(n(),u(W,F({key:3,ref_for:!0},e.sliderConfig,{modelValue:e.Value,"onUpdate:modelValue":l=>e.Value=l,style:{flex:"1",padding:"0 15px"},disabled:t.value,"show-stops":"",onChange:l=>p(e)}),null,16,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="switch"?(n(),u(G,F({key:4,ref_for:!0},e.switchConfig,{modelValue:e.Value,"onUpdate:modelValue":l=>e.Value=l,disabled:t.value,style:{flex:"1"},onChange:l=>p(e)}),null,16,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="inputNumber"?(n(),u(q,F({key:5,ref_for:!0},e.sliderConfig,{modelValue:e.Value,"onUpdate:modelValue":l=>e.Value=l,disabled:t.value,style:{flex:"1"},min:1,max:10,onChange:l=>p(e)}),null,16,["modelValue","onUpdate:modelValue","disabled","onChange"])):e.type==="builtInFunc"?(n(),v("div",oe,[y(C,{modelValue:e._FuncType,"onUpdate:modelValue":l=>e._FuncType=l,disabled:t.value,style:{flex:"1"},placeholder:"请选择函数类型",onChange:l=>f(e)},{default:d(()=>[(n(),v(m,null,T(P,l=>y(g,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"]),[0].includes(e._FuncType)?(n(),u(C,{key:0,modelValue:e._DataType,"onUpdate:modelValue":l=>e._DataType=l,disabled:t.value,style:{flex:"1"},placeholder:"请选择数据类型",onChange:l=>f(e)},{default:d(()=>[(n(),v(m,null,T(B,l=>y(g,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])):_("",!0),[0,2].includes(e._FuncType)?(n(),u(r,{key:1,modelValue:e._Min,"onUpdate:modelValue":l=>e._Min=l,disabled:t.value,style:{flex:"1"},placeholder:"请输入最小值",onChange:l=>f(e)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):_("",!0),[0,2].includes(e._FuncType)?(n(),u(r,{key:2,modelValue:e._Max,"onUpdate:modelValue":l=>e._Max=l,disabled:t.value,style:{flex:"1"},placeholder:"请输入最大值",onChange:l=>f(e)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):_("",!0),[1,2].includes(e._FuncType)?(n(),u(r,{key:3,modelValue:e._Time,"onUpdate:modelValue":l=>e._Time=l,disabled:t.value,style:{flex:"1"},placeholder:"周期",onChange:l=>f(e)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):_("",!0),[1].includes(e._FuncType)?(n(),u(r,{key:4,modelValue:e._Amp,"onUpdate:modelValue":l=>e._Amp=l,disabled:t.value,style:{flex:"1"},placeholder:"振幅",onChange:l=>f(e)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):_("",!0),[2].includes(e._FuncType)?(n(),u(r,{key:5,modelValue:e._Scale,"onUpdate:modelValue":l=>e._Scale=l,disabled:t.value,style:{flex:"1"},placeholder:"比例",onChange:l=>f(e)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):_("",!0)])):_("",!0),e.Units?(n(),v("div",de,U(e.Units||""),1)):_("",!0)]),_:2},1032,["label"]))),128))]),_:1}),(b=k.value)!=null&&b.length?_("",!0):(n(),u(K,{key:0},{default:d(()=>o[3]||(o[3]=[i(" 没有绑定数据 ")])),image:d(()=>o[4]||(o[4]=[O("img",{src:Z},null,-1)])),_:1}))]}),_:2},[h.value.attrForm.hiddenTitle?void 0:{name:"header",fn:d(()=>[O("b",null,U(h.value.attrForm.title||"数据激励"),1)]),key:"0"},h.value.attrForm.hiddenFooter?void 0:{name:"footer",fn:d(()=>[y(Q,null,{default:d(()=>[y(C,{modelValue:c.value.sendType,"onUpdate:modelValue":o[0]||(o[0]=b=>c.value.sendType=b),style:{width:"150px"},placeholder:"请选择发送方式"},{default:d(()=>[y(g,{label:"单次发送",value:0}),y(g,{label:"连续发送",value:1})]),_:1},8,["modelValue"]),c.value.sendType===1?(n(),u(r,{key:0,modelValue:c.value.cycleValue,"onUpdate:modelValue":o[1]||(o[1]=b=>c.value.cycleValue=b),type:"primary",placeholder:"请填写发送周期"},{append:d(()=>o[5]||(o[5]=[i("毫秒")])),_:1},8,["modelValue"])):_("",!0),t.value?(n(),u($,{key:2,type:"info",onClick:z},{default:d(()=>o[7]||(o[7]=[i("停止发送")])),_:1})):(n(),u($,{key:1,type:"success",onClick:o[2]||(o[2]=b=>p())},{default:d(()=>o[6]||(o[6]=[i("开始发送")])),_:1}))]),_:1})]),key:"1"}]),1032,["style"])}}},Ve=ee(te,[["__scopeId","data-v-24756892"]]);export{Ve as default};
