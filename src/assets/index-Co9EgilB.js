import{_ as S}from"./system-ctrl-select-Em8B5Bdm.js";import{_ as V,a as b}from"./p-switch-off-Dy4MTTLs.js";import{_ as I}from"./empty-SobI8E2D.js";import{G as $,a as O}from"./dataMonitor-BqNmZQKc.js";import{u as U}from"./useObserverMsg-mppqzyYd.js";import{s as D}from"./system-BzlGO5Bl.js";import{r as h,j as T,l as G,z as A,n as B,a as x,g as l,i as r,f as _,m as z,p as W,F as j,A as H,B as Q,y as X}from"./index-Dju9e0Mk.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./http-Cr7o0t0N.js";import"./categorizeParameters-C40L_2hr.js";const J="/assets/on@2x-BpC6XWFR.png",K="/assets/off@2x-dkkM5kk7.png",Y={key:0},Z={key:0,class:"main"},ee={class:"title"},ae=["onClick"],se=["onClick"],oe="PowerControl",te={__name:"index",setup(ne){const i=h([]),E=["poPow_IRU1_A","poPow_IRU1_B","poPow_IRU2_A","poPow_IRU2_B","poPow_IRU3_A","poPow_IRU3_B","poPow_FCE_A1_A","poPow_FCE_A1_B","poPow_FCE_A2_A","poPow_FCE_A2_B","poPow_FCE_A3_A","poPow_FCE_A3_B","poPow_FCE_B1_A","poPow_FCE_B1_B"],v=h(!1);function g(a,e){const n=a.value==="0"?"1":"0",m=a.msgName==="poPower_All";let s=[];m?s=i.value.concat([t]):i.value.every(c=>c.msgName===a.msgName&&c.ParamName===a.ParamName?!0:c.value!==a.value)||t.value==="0"&&n==="1"?s=[t,a]:s=[a];const p=[];s.forEach(o=>{p.push({type:"Serial",MessageName:o.msgName,Parameters:[{ParameterName:o.ParamName,Value:n}]})}),D({once:!0,messageList:p})}const f=[];function F(){i.value=Array(14).fill({}),f.length=0,f.push({protocolType:"Serial",MessageName:t.msgName,ParamName:t.ParamName})}const t=T({msgName:"poPower_All",ParamName:"Powercontrol",value:"0"}),{refresh:M}=U(L);function L(a){a==null||a.forEach(e=>{const n=i.value.concat([t]).find(m=>e.Name===`Serial-${m.msgName}-${m.ParamName}`);n&&(n.value=e.Engineering_Value)})}function P(){v.value=!0,F(),$().then(async a=>{var n,m,s,p;const e=(p=(s=(m=(n=a==null?void 0:a.participant_list)==null?void 0:n.find(o=>o.paticipant_name===oe))==null?void 0:m.protocol_list)==null?void 0:s.find(o=>o.protocol_type==="Serial"))==null?void 0:p.pub_message_name;if(!e){i.value=[];return}for(let o=0,c=e.length;o<c;o++){const N=e[o];await O(N,"Serial").then(u=>{var k,C;const d=(k=u==null?void 0:u.children_info)==null?void 0:k[0];if(!d)return;f.push({protocolType:"Serial",MessageName:N,ParamName:d.name});const w=((C=d.attributes.find(R=>R.name==="DefaultValue"))==null?void 0:C.value)||"0",y=E.indexOf(u.name);y>-1?i.value.splice(y,1,{msgName:u.name,value:w,ParamName:d.name}):t.value=w})}M(f),v.value=!1})}return G(P),(a,e)=>{const n=x("a-empty"),m=x("NSpin");return l(),A(m,{show:v.value,class:"main-content"},{default:B(()=>[e[4]||(e[4]=r("div",{class:"navHeader"},[r("div",{class:"img-box"},[r("img",{src:S})]),r("span",null,[z("系统控制 / "),r("span",{class:"child-text"},"电源控制面板")])],-1)),r("div",null,[i.value.length?(l(),_("div",Y,[t.value==="1"?(l(),_("img",{key:0,class:"switch-img",src:V,onClick:e[0]||(e[0]=s=>g(t))})):(l(),_("img",{key:1,class:"switch-img",src:b,onClick:e[1]||(e[1]=s=>g(t))}))])):W("",!0),r("span",{class:"operate-tag",style:{margin:"20px 0"},onClick:P}," 刷新列表 ")]),i.value.length?(l(),_("div",Z,[(l(!0),_(j,null,H(i.value,(s,p)=>(l(),_("div",{key:p,class:Q(["item",s.value==="0"?"onbgimg":""])},[r("div",ee,X((s.msgName||"").replace("poPow_","")),1),e[2]||(e[2]=r("div",{style:{height:"50px"}},null,-1)),s.value!=="0"?(l(),_("img",{key:0,class:"p-item",src:J,alt:"",onClick:o=>g(s)},null,8,ae)):(l(),_("img",{key:1,class:"p-item",src:K,alt:"",onClick:o=>g(s)},null,8,se))],2))),128))])):(l(),A(n,{key:1},{image:B(()=>e[3]||(e[3]=[r("img",{src:I},null,-1)])),_:1}))]),_:1},8,["show"])}}},de=q(te,[["__scopeId","data-v-936d874c"]]);export{de as default};
