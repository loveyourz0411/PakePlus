import{_ as H}from"./system-ctrl-select-Em8B5Bdm.js";import{u as x}from"./useObserverMsg-mppqzyYd.js";import{s as F}from"./system-BzlGO5Bl.js";import{s as T,j as N,f as w,i as s,m as D,c as r,a as d,g as W}from"./index-Dju9e0Mk.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./categorizeParameters-C40L_2hr.js";const v={class:"main-content"},A={class:"tables"},B={__name:"index",setup(I){const{appContext:h}=T(),{$message:S}=h.config.globalProperties;function o(a=0,t=0){let[e,i=""]=String(a).split("."),[g,l=""]=String(t).split(".");const m=Math.max(i.length,l.length);i.length<m?i=i.padEnd(m,"0"):l=l.padEnd(m,"0");const L=Number(e+i),b=Number(g+l);return(L-b)/Math.pow(10,m)}function u(a,t){let e,i;try{e=a.toString().split(".")[1].length}catch{e=0}try{i=t.toString().split(".")[1].length}catch{i=0}const g=Math.pow(10,Math.max(e,i));return(a*g+t*g)/g}function _(a){for(;a<0;)a=u(a,360);return a}const C=[{title:"传感器名称",align:"center",dataIndex:"displayName",ellipsis:!0,tooltip:!0,nameFilter:!0},{title:"原始值",align:"center",dataIndex:"originVal",ellipsis:!0,tooltip:!0,nameFilter:!0},{title:"Post-Rigging值",align:"center",render({record:a}){const t=isNaN(+a.baseVal)?0:+a.baseVal,e=isNaN(+a.originVal)?0:+a.originVal;return _(o(e,t))}}],V=[{title:"传感器名称",align:"center",dataIndex:"displayName",ellipsis:!0,tooltip:!0,nameFilter:!0},{title:"原始值",align:"center",dataIndex:"originVal",ellipsis:!0,tooltip:!0,nameFilter:!0},{title:"Post-Rigging值",align:"center",render({record:a}){const t=isNaN(+a.baseVal)?0:+a.baseVal,e=isNaN(+a.originVal)?0:+a.originVal;return _(o(e,t))}},{title:"仿真",align:"center",render({record:a}){return a.msgName.includes("_Ch2")?"":r(d("a-input"),{modelValue:a.postRiggingVal,"onUpdate:modelValue":t=>a.postRiggingVal=t},null)}}],p=N([{msgName:"Right_Slat_Skew4_Ch2",displayName:"L Slat S4 CH#1"},{msgName:"Right_Slat_Skew4_Ch2",displayName:"L Slat S4 CH#2"},{msgName:"Right_Slat_Skew5_Ch2",displayName:"L Slat S5 CH#1"},{msgName:"Right_Slat_Skew5_Ch2",displayName:"L Slat S5 CH#2"},{msgName:"Right_Slat_Skew12_Ch2",displayName:"L Slat S12 CH#1"},{msgName:"Right_Slat_Skew12_Ch2",displayName:"L Slat S12 CH#2"},{msgName:"Right_Flap_Wingtip_Ch2",displayName:"L Flap WT CH#1"},{msgName:"Right_Flap_Wingtip_Ch2",displayName:"L Flap WT CH#2"},{msgName:"Right_Slat_Skew_LVDT_Ch2",displayName:"L Flap LVDT CH#1"},{msgName:"Right_Slat_Skew_LVDT_Ch2",displayName:"L Flap LVDT CH#2"}]),n=N([{msgName:"Right_Slat_Skew4_Ch1",displayName:"R Slat S4 CH#1"},{msgName:"Right_Slat_Skew4_Ch2",displayName:"R Slat S4 CH#2"},{msgName:"Right_Slat_Skew5_Ch1",displayName:"R Slat S5 CH#1"},{msgName:"Right_Slat_Skew5_Ch2",displayName:"R Slat S5 CH#2"},{msgName:"Right_Slat_Skew12_Ch1",displayName:"R Slat S12 CH#1"},{msgName:"Right_Slat_Skew12_Ch2",displayName:"R Slat S12 CH#2"},{msgName:"Right_Flap_Wingtip_Ch1",displayName:"R Flap WT CH#1"},{msgName:"Right_Flap_Wingtip_Ch2",displayName:"R Flap WT CH#2"},{msgName:"Right_Flap_Skew_LVDT_Ch1",displayName:"R Flap LVDT CH#1"},{msgName:"Right_Flap_Skew_LVDT_Ch2",displayName:"R Flap LVDT CH#2"}]);function R(){p.concat(n).forEach(a=>{const t=isNaN(+a.originVal)?0:+a.originVal;a.baseVal=o(t,15),a.originVal=t,a.postRiggingVal=""})}function f(){const a=[];if(n.forEach(t=>{if(t.msgName.includes("_Ch2")||!t.postRiggingVal)return;const e=isNaN(+t.postRiggingVal)?0:+t.postRiggingVal,i=((t.baseVal||0)+e)%360;a.push({type:"Analog",ParameterName:`po${t.msgName}`,Value:i})}),!a.length)return S.warning("没有要发送的值");console.log(a),F({once:!0,messageList:a})}function y(a){a==null||a.forEach(t=>{const e=p.concat(n).find(i=>`Analog-${i.msgName}`===t.Name);e&&(e.originVal=t.Engineering_Value)})}const{refresh:k}=x(y);function c(){const a=n.map(t=>({type:"Analog",ParamName:`pi${t.msgName}`}));k(a)}return c(),(a,t)=>{const e=d("AeTable");return W(),w("div",v,[t[0]||(t[0]=s("div",{class:"navHeader"},[s("div",{class:"img-box"},[s("img",{src:H})]),s("span",null,[D(" 系统控制 / "),s("span",{class:"child-text"},"襟缝翼仿真")])],-1)),s("div",{style:{margin:"15px 0 10px 0"}},[s("span",{class:"operate-tag isBackTop",onClick:c}," 刷新 "),s("span",{class:"operate-tag isBackTop",onClick:R}," Rigging "),s("span",{class:"operate-tag isBackTop",onClick:f}," 发送 ")]),s("div",A,[r(e,{columns:C,data:p},null,8,["data"]),r(e,{columns:V,data:n},null,8,["data"])])])}}},q=E(B,[["__scopeId","data-v-6f4f3e75"]]);export{q as default};
