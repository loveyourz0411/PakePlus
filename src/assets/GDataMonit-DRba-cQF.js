import N from"./tabData-W8VUJ0XZ.js";import{c as M,u as U}from"./useValue-uJ0ITHZ1.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a_ as O,k as V,r as v,w as $,o as G,a as r,z as i,g as m,bw as j,n as o,i as A,y as H,c as u,p as L,m as b,G as d,U as W,x as q}from"./index-Dju9e0Mk.js";import"./index-DsTk74qP.js";import"./util-CASLgOZv.js";import"./dataMonitor-BqNmZQKc.js";import"./http-Cr7o0t0N.js";import"./system-BzlGO5Bl.js";import"./useObserverMsg-mppqzyYd.js";import"./categorizeParameters-C40L_2hr.js";const P={__name:"GDataMonit",props:{gridItem:Object},setup(w){const g=w,p=O("environment"),n=V(()=>g.gridItem.data),t=v(M({name:"Tab",isMain:!1,sendType:0,timer:1e3})),{AeTableRef:C,extendRows:f,startSendValues:R,stopSendValues:k,setQueryValues:x}=U(t),D=["Read Value","Write Value","Display Type","Units","Bit Offset","Time Of Last Refresh","Channel","Label","Message/Word","Parameter"];$(()=>{const a=n.value.dataForm.parameter||[];p!=="EDIT"&&x(a),t.value.tableData=a});const h=V(()=>n.value.dataForm.showColumns||D),y=v(),T=v(300),S=F(([a])=>{T.value=`${a.contentRect.height-5}px`},500);G(()=>{new ResizeObserver(S).observe(y.value.$el.querySelector(".el-card__body"))});function F(a,e){let s;return function(...c){clearTimeout(s),s=setTimeout(()=>{a(...c)},e)}}return(a,e)=>{const s=r("el-option"),c=r("el-select"),z=r("el-input"),_=r("el-button"),E=r("NSpace"),I=r("el-card");return m(),i(I,{ref_key:"ElCardRef",ref:y,style:q({background:n.value.attrForm.bgColor||"#fff",borderRadius:"10px"}),shadow:"hover"},j({default:o(()=>[u(N,{ref_key:"AeTableRef",ref:C,extendRows:d(f),"onUpdate:extendRows":e[0]||(e[0]=l=>W(f)?f.value=l:null),height:T.value,currentTag:t.value,showColumns:h.value},null,8,["extendRows","height","currentTag","showColumns"])]),_:2},[n.value.attrForm.hiddenTitle?void 0:{name:"header",fn:o(()=>[A("b",null,H(n.value.attrForm.title||"数据监控"),1)]),key:"0"},n.value.attrForm.hiddenFooter?void 0:{name:"footer",fn:o(()=>[u(E,null,{default:o(()=>[u(c,{modelValue:t.value.sendType,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.sendType=l),disabled:!!t.value.pubValueTimer,style:{width:"150px"},placeholder:"请选择发送方式"},{default:o(()=>[u(s,{label:"单次发送",value:0}),u(s,{label:"连续发送",value:1})]),_:1},8,["modelValue","disabled"]),t.value.sendType===1?(m(),i(z,{key:0,modelValue:t.value.timer,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.timer=l),disabled:!!t.value.pubValueTimer,type:"primary",placeholder:"请填写发送周期"},{append:o(()=>e[5]||(e[5]=[b("毫秒")])),_:1},8,["modelValue","disabled"])):L("",!0),t.value.pubValueTimer?(m(),i(_,{key:2,type:"info",onClick:e[4]||(e[4]=l=>d(p)!=="EDIT"&&d(k)())},{default:o(()=>e[7]||(e[7]=[b("停止发送")])),_:1})):(m(),i(_,{key:1,type:"success",onClick:e[3]||(e[3]=l=>d(p)!=="EDIT"&&d(R)(t.value))},{default:o(()=>e[6]||(e[6]=[b("开始发送")])),_:1}))]),_:1})]),key:"1"}]),1032,["style"])}}},ne=B(P,[["__scopeId","data-v-da8f4e20"]]);export{ne as default};
