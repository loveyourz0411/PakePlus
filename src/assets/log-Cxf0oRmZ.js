import{_ as b}from"./system-mgt-select-BLx3586I.js";import{h as S}from"./http-Cr7o0t0N.js";import{s as x,r as o,f as O,i as a,c as i,m as I,a as u,g as L}from"./index-Dju9e0Mk.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";function U(p){return S.get("/VIPSystem/api/system/operlog_list",{params:p})}const z={class:"main-content"},C={__name:"log",setup(p){const{appContext:d}=x(),{$message:_}=d.config.globalProperties,g={"/api/auto_test/requirement":{POST:"新增需求",PUT:"修改需求",DELETE:"删除需求"},"/api/system/role":{POST:"新增角色",PUT:"修改角色",DELETE:"删除角色"},"/api/system/user":{POST:"新增用户",PUT:"修改用户",DELETE:"删除用户"},"/api/auto_test/project":{POST:"新增项目",PUT:"修改项目",DELETE:"删除项目"},"/api/auto_test/public_case":{POST:"新增公共用例",PUT:"修改公共用例",DELETE:"删除公共用例"},"/api/auto_test/drag_public_case":{POST:"拖拽排序公共用例"},"/api/auto_test/run_task":{POST:"执行任务"},"/api/common/upload":{POST:"上传文件"},"/api/auto_test/task_bind_case":{POST:"任务关联用例"},"/api/auto_test/operate_task":{POST:"更改任务状态"}},T=[{title:"操作人",render({record:e}){return e.userInfo.userName},nameFilter:!0},{title:"操作人IP地址",dataIndex:"IP",nameFilter:!0},{title:"请求地址",dataIndex:"url",nameFilter:!0},{title:"请求类型",dataIndex:"method",nameFilter:!0,render({record:e}){return i(u("a-tag"),{color:P(e.method)},{default:()=>[e.method||"未知"]})}},{title:"描述",render({record:e}){const t=g[e.url];return t?t[e.method]:"未知"}},{title:"操作时间",dataIndex:"createTime"}],c=o([]),m=o(0),s=o(1),n=o(10),f={POST:"#00b42a",GET:"#b71de8",DELETE:"#f53f3f",PUT:"#7bc616"};function P(e){return f[e]||"#0fc6c2"}function r(){U({pageNumber:s.value,pageSize:n.value}).then(e=>{if(console.log(e),e.code!==200)return _.error(e.errMsg||"获取日志列表失败");c.value=e.data,m.value=e.total})}return r(),(e,t)=>{const E=u("AeTable"),v=u("a-pagination");return L(),O("div",z,[t[2]||(t[2]=a("div",{class:"navHeader"},[a("div",{class:"img-box"},[a("img",{src:b})]),a("span",null,[I("系统管理 / "),a("span",{class:"child-text"},"操作日志")])],-1)),i(E,{ref:"vxeTableRef",class:"vxeTableBox",columns:T,data:c.value},null,8,["data"]),i(v,{current:s.value,"onUpdate:current":t[0]||(t[0]=l=>s.value=l),"page-size":n.value,"onUpdate:pageSize":t[1]||(t[1]=l=>n.value=l),total:m.value,"show-page-size":"","show-total":"",onChange:r,onPageSizeChange:r},null,8,["current","page-size","total"])])}}},B=h(C,[["__scopeId","data-v-51fa4c14"]]);export{B as default};
