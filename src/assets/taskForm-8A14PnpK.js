import{_ as C}from"./auto-test-select-DqLsCXzn.js";import{s as F,r as v,a8 as q,f as N,i as r,m as i,y as R,c as o,n as s,a as d,K as S,g as U,G as B}from"./index-Dju9e0Mk.js";import{P as $,A as j}from"./case-Dg8WzVaS.js";import{t as m}from"./defaultParam-mXCUOp30.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./http-Cr7o0t0N.js";const D={class:"main-content"},w={class:"navHeader"},z={class:"child-text"},E={class:"form-box"},G={class:"footer"},H={__name:"taskForm",setup(J){const{appContext:g}=F(),{$message:p}=g.config.globalProperties,f=S(),I=q(),t=v(m()),c=v(),k={name:{type:"string",required:!0,message:"请填写任务名称"},version:{type:"string",required:!0,message:"请填写任务版本"},IP:{type:"ip",required:!0,message:"IP格式不正确"}},{parentId:V=0,projectId:b,id:P}=I.query;if(P){const n=JSON.parse(sessionStorage.getItem("task")||null);n&&(t.value=m({...n,id:n.ID}))}else t.value=m({parentId:+V,projectId:+b});function y(){c.value.validate(n=>{if(n)return;const e={...t.value};(e.id?$:j)(e).then(a=>{if(a.code!==200)return p.error(a.errMsg||"操作失败");p.success(a.msg||"操作成功"),f.back()})})}return(n,e)=>{const u=d("a-input"),a=d("a-form-item"),_=d("a-button"),x=d("a-form");return U(),N("div",D,[r("div",w,[e[6]||(e[6]=r("div",{class:"img-box"},[r("img",{src:C})],-1)),r("span",null,[e[5]||(e[5]=i("自动化测试 / ")),r("span",z,R(t.value.id?"修改":"新增")+"任务",1)])]),r("div",E,[o(x,{ref_key:"dataFormRef",ref:c,"scroll-to-first-error":!0,rules:k,model:t.value,size:"large",layout:"vertical"},{default:s(()=>[o(a,{field:"name",label:"任务名称",tooltip:"任务名称 不可重复"},{default:s(()=>[o(u,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.name=l),placeholder:"请输入任务名"},null,8,["modelValue"])]),_:1}),o(a,{field:"version",label:"任务版本",tooltip:"版本号 建议纯数字"},{default:s(()=>[o(u,{modelValue:t.value.version,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.version=l),placeholder:"请输入任务版本"},null,8,["modelValue"])]),_:1}),o(a,{field:"IP",label:"下位机IP",tooltip:"IP地址"},{default:s(()=>[o(u,{modelValue:t.value.IP,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.IP=l),placeholder:"请输入下位机IP"},null,8,["modelValue"])]),_:1}),o(a,{field:"remark",label:"任务描述"},{default:s(()=>[o(u,{modelValue:t.value.remark,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.remark=l),placeholder:"请输入任务描述"},null,8,["modelValue"])]),_:1}),o(a,null,{default:s(()=>[r("div",G,[o(_,{onClick:e[4]||(e[4]=l=>B(f).back())},{default:s(()=>e[7]||(e[7]=[i("返回")])),_:1}),o(_,{type:"primary",onClick:y},{default:s(()=>e[8]||(e[8]=[i("提交")])),_:1})])]),_:1})]),_:1},8,["model"])])])}}},W=A(H,[["__scopeId","data-v-96855336"]]);export{W as default};
