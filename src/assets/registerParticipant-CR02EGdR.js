import{u as p}from"./util-CASLgOZv.js";import{T as m,b7 as c,b8 as l}from"./index-Dju9e0Mk.js";function P(i={}){const{name:t,port:a}=i;return m.value.some(r=>r.name===t&&!["Shutdown","Unconnected"].includes(r.status))?Promise.resolve({result:!1,error_message:"名字重复"}):new Promise(r=>{c({url:`http://127.0.0.1:${a}/VIP/Setup`,name:p.randomString()}).then(o=>{const{ip_address:e,port:s}=o;if(e&&s){const n=`http://${e}:${s}/VIP`;return l({url:`${n}/RegisterParticipant`,name:t,description:"description",part_number:"1",version:"1"}).then(u=>r({...u,url:n,result:!0}))}return r({result:!1,error_message:"Setup 失败"})})})}export{P as r};
