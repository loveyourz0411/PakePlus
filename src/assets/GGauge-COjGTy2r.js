import{i as B}from"./index-CSF_gV1R.js";import{u as j}from"./useObserverMsg-CMQp4RXz.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{k as b,t as I,r as L,o as R,a,z as T,g as C,bw as D,n as i,c as s,i as _,y as E,U as M,G as g,m as x,x as U}from"./index-Dju9e0Mk.js";import"./useObserverMsg-mppqzyYd.js";import"./system-BzlGO5Bl.js";import"./categorizeParameters-C40L_2hr.js";const $={__name:"GGauge",props:{gridItem:Object},setup(S){const r=S,h=b(()=>r.gridItem.data),l=b(()=>h.value.attrForm);let n=null;function y(e){return parseFloat(e.toFixed(2))}const c={show:!0,distance:30,fontSize:12,formatter:e=>y(e)},p={valueAnimation:!0,color:"inherit"},u={series:[{type:"gauge",radius:"100%",axisLine:{lineStyle:{width:20,color:[[.3,"#67e0e3"],[.7,"#37a2da"],[1,"#fd666d"]]}},pointer:{itemStyle:{color:"auto"}},axisTick:{show:!0},splitLine:{distance:10,length:15,lineStyle:{color:"#409eff",width:3}},axisLabel:c,detail:p,data:[{value:0}]}]};I(()=>r.gridItem.data.dataForm,k,{immediate:!0,deep:!0});const f=L();function z(){const e=f.value;n=B(e),n.setOption(u),new ResizeObserver(()=>n==null?void 0:n.resize()).observe(e)}const{time:d,refresh:v}=j(r.gridItem.data.dataForm.parameter,w);function w(e){var o;const t=(o=e==null?void 0:e[0])==null?void 0:o.Engineering_Value;t!==void 0&&n.setOption({series:[{data:[{value:t}]}]})}function k(e){Object.assign(u.series[0],{min:e.min===void 0?0:e.min,max:e.max===void 0?100:e.max,splitNumber:e.splitNumber===void 0?10:e.splitNumber}),Object.assign(c,{fontSize:e.axisLabelFontSize===void 0?12:e.axisLabelFontSize}),Object.assign(p,{fontSize:e.detailFontSize===void 0?30:e.detailFontSize,formatter:t=>`${t}${e.unit||""}`}),setTimeout(()=>n.setOption(u))}return R(z),(e,t)=>{const o=a("el-input"),O=a("el-button"),m=a("NSpace"),V=a("el-card");return C(),T(V,{style:U({background:l.value.bgColor||"#fff",borderRadius:"10px"}),shadow:"hover"},D({default:i(()=>[_("div",{ref_key:"echartBoxRef",ref:f,class:"echartBox"},null,512)]),_:2},[l.value.hiddenTitle?void 0:{name:"header",fn:i(()=>[s(m,{align:"center",justify:"space-between"},{default:i(()=>[_("b",null,E(l.value.title||"仪表盘"),1),s(m,null,{default:i(()=>[s(o,{modelValue:g(d),"onUpdate:modelValue":t[0]||(t[0]=N=>M(d)?d.value=N:null),placeholder:"请填写采样频率"},{append:i(()=>t[1]||(t[1]=[x("毫秒")])),_:1},8,["modelValue"]),s(O,{type:"primary",onClick:g(v)},{default:i(()=>t[2]||(t[2]=[x("刷新采样频率")])),_:1},8,["onClick"])]),_:1})]),_:1})]),key:"0"}]),1032,["style"])}}},Q=G($,[["__scopeId","data-v-036070b1"]]);export{Q as default};
