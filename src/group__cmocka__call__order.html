<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cmocka: Call Ordering</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script src="striped_bg.js"></script>
<link href="that_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cmocka
   &#160;<span id="projectnumber">1.1.5</span>
   </div>
   <div id="projectbrief">Unit testing library with mock support</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Call Ordering<div class="ingroups"><a class="el" href="group__cmocka.html">The CMocka API</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Call Ordering:</div>
<div class="dyncontent">
<div class="center"><img src="group__cmocka__call__order.png" border="0" usemap="#agroup____cmocka____call____order" alt=""/></div>
<map name="agroup____cmocka____call____order" id="agroup____cmocka____call____order">
<area shape="rect" href="group__cmocka.html" title=" " alt="" coords="5,5,127,32"/>
<area shape="rect" title=" " alt="" coords="175,5,272,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaba98dca3bf1bdf3831d99ddc57c4c906"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906">function_called</a> (void)</td></tr>
<tr class="memdesc:gaba98dca3bf1bdf3831d99ddc57c4c906"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that current mocked function is being called in the expected order.  <br /></td></tr>
<tr class="separator:gaba98dca3bf1bdf3831d99ddc57c4c906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf524c924961323e9fe408133a5584170"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmocka__call__order.html#gaf524c924961323e9fe408133a5584170">expect_function_calls</a> (#function, const int times)</td></tr>
<tr class="memdesc:gaf524c924961323e9fe408133a5584170"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store expected call(s) to a mock to be checked by <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> later.  <br /></td></tr>
<tr class="separator:gaf524c924961323e9fe408133a5584170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5aa74528dcd42fb91ba0223b55c8e655"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655">expect_function_call</a> (#function)</td></tr>
<tr class="memdesc:ga5aa74528dcd42fb91ba0223b55c8e655"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store expected single call to a mock to be checked by <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> later.  <br /></td></tr>
<tr class="separator:ga5aa74528dcd42fb91ba0223b55c8e655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b68b067482717e91cc1f171b41f11b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmocka__call__order.html#ga1b68b067482717e91cc1f171b41f11b2">expect_function_call_any</a> (#function)</td></tr>
<tr class="memdesc:ga1b68b067482717e91cc1f171b41f11b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expects <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> from given mock at least once.  <br /></td></tr>
<tr class="separator:ga1b68b067482717e91cc1f171b41f11b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b0c90d901ba153742fa6b04fec49902"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmocka__call__order.html#ga0b0c90d901ba153742fa6b04fec49902">ignore_function_calls</a> (#function)</td></tr>
<tr class="memdesc:ga0b0c90d901ba153742fa6b04fec49902"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignores <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> invocations from given mock function.  <br /></td></tr>
<tr class="separator:ga0b0c90d901ba153742fa6b04fec49902"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>It is often beneficial to make sure that functions are called in an order. This is independent of mock returns and parameter checking as both of the aforementioned do not check the order in which they are called from different functions.</p>
<ul>
<li>
<p class="startli"><b>expect_function_call(function)</b> - The <a class="el" href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655" title="Store expected single call to a mock to be checked by function_called() later.">expect_function_call()</a> macro pushes an expectation onto the stack of expected calls.</p>
<p class="endli"></p>
</li>
<li>
<b><a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a></b> - pops a value from the stack of expected calls. <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> is invoked within the mock object that uses it. </li>
</ul>
<p><a class="el" href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655" title="Store expected single call to a mock to be checked by function_called() later.">expect_function_call()</a> and <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> are intended to be used in pairs. Cmocka will fail a test if there are more or less expected calls created (e.g. <a class="el" href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655" title="Store expected single call to a mock to be checked by function_called() later.">expect_function_call()</a>) than consumed with <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a>. There are provisions such as <a class="el" href="group__cmocka__call__order.html#ga0b0c90d901ba153742fa6b04fec49902" title="Ignores function_called() invocations from given mock function.">ignore_function_calls()</a> which allow this restriction to be circumvented in tests where mock calls for the code under test are not the focus of the test. <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> must be called from the same thread as <a class="el" href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655" title="Store expected single call to a mock to be checked by function_called() later.">expect_function_call()</a>, and that thread must have been initialized for use by cmocka (see also the <a href="index.html#main-threads">Threading section of the main documentation page</a>).</p>
<p>The following example illustrates how a unit test instructs cmocka to expect a <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> from a particular mock, <b>chef_sing()</b>:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> chef_sing(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> code_under_test()</div>
<div class="line">{</div>
<div class="line">  chef_sing();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> some_test(<span class="keywordtype">void</span> **state)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655">expect_function_call</a>(chef_sing);</div>
<div class="line">    code_under_test();</div>
<div class="line">}</div>
<div class="ttc" id="agroup__cmocka__call__order_html_ga5aa74528dcd42fb91ba0223b55c8e655"><div class="ttname"><a href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655">expect_function_call</a></div><div class="ttdeci">void expect_function_call(#function)</div><div class="ttdoc">Store expected single call to a mock to be checked by function_called() later.</div></div>
</div><!-- fragment --><p>The implementation of the mock then must check whether it was meant to be called by invoking <b><a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a></b>:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> chef_sing()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906">function_called</a>();</div>
<div class="line">}</div>
<div class="ttc" id="agroup__cmocka__call__order_html_gaba98dca3bf1bdf3831d99ddc57c4c906"><div class="ttname"><a href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906">function_called</a></div><div class="ttdeci">void function_called(void)</div><div class="ttdoc">Check that current mocked function is being called in the expected order.</div></div>
</div><!-- fragment --> <h2 class="groupheader">Function Documentation</h2>
<a id="ga5aa74528dcd42fb91ba0223b55c8e655" name="ga5aa74528dcd42fb91ba0223b55c8e655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5aa74528dcd42fb91ba0223b55c8e655">&#9670;&#160;</a></span>expect_function_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void expect_function_call </td>
          <td>(</td>
          <td class="paramtype">#&#160;</td>
          <td class="paramname"><em>function</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store expected single call to a mock to be checked by <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> later. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramtype"></td><td class="paramname">function</td><td>The function which should should be called</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> </dd></dl>

</div>
</div>
<a id="ga1b68b067482717e91cc1f171b41f11b2" name="ga1b68b067482717e91cc1f171b41f11b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b68b067482717e91cc1f171b41f11b2">&#9670;&#160;</a></span>expect_function_call_any()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void expect_function_call_any </td>
          <td>(</td>
          <td class="paramtype">#&#160;</td>
          <td class="paramname"><em>function</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expects <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> from given mock at least once. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramtype"></td><td class="paramname">function</td><td>The function which should should be called</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> </dd></dl>

</div>
</div>
<a id="gaf524c924961323e9fe408133a5584170" name="gaf524c924961323e9fe408133a5584170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf524c924961323e9fe408133a5584170">&#9670;&#160;</a></span>expect_function_calls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void expect_function_calls </td>
          <td>(</td>
          <td class="paramtype">#&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>times</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store expected call(s) to a mock to be checked by <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> later. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramtype"></td><td class="paramname">function</td><td>The function which should should be called</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramtype"></td><td class="paramname">times</td><td>number of times this mock must be called</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> </dd></dl>

</div>
</div>
<a id="gaba98dca3bf1bdf3831d99ddc57c4c906" name="gaba98dca3bf1bdf3831d99ddc57c4c906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaba98dca3bf1bdf3831d99ddc57c4c906">&#9670;&#160;</a></span>function_called()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void function_called </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check that current mocked function is being called in the expected order. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__cmocka__call__order.html#ga5aa74528dcd42fb91ba0223b55c8e655" title="Store expected single call to a mock to be checked by function_called() later.">expect_function_call()</a> </dd></dl>

</div>
</div>
<a id="ga0b0c90d901ba153742fa6b04fec49902" name="ga0b0c90d901ba153742fa6b04fec49902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b0c90d901ba153742fa6b04fec49902">&#9670;&#160;</a></span>ignore_function_calls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ignore_function_calls </td>
          <td>(</td>
          <td class="paramtype">#&#160;</td>
          <td class="paramname"><em>function</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ignores <a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> invocations from given mock function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramtype"></td><td class="paramname">function</td><td>The function which should should be called</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__cmocka__call__order.html#gaba98dca3bf1bdf3831d99ddc57c4c906" title="Check that current mocked function is being called in the expected order.">function_called()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
